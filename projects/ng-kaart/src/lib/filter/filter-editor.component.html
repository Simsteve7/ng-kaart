<div class="modal-dialog-background" *ngIf="(zichtbaar$ | async)" (click)="onClickOutside()">
  <div class="mat-dialog-container modal-dialog filter-dialog" (click)="onClickInside()">
    <div class="filter-header">
      <div class="filter-titel">{{ titel$ | async }} filter instellen</div>
      <mat-icon class="filter-sluit-button" (click)="close()">close</mat-icon>
    </div>

    <div class="filter-content">
      <div class="filter-naam">
        <mat-form-field class="filter-naam">
          <input type="text" placeholder="Omschrijving filter" matInput [formControl]="naamControl"/>
        </mat-form-field>
      </div>
      <div class="filter-definitie">
        <mat-form-field class="filter-velden-combo">
          <input type="text" placeholder="Eigenschap" matInput [formControl]="veldControl" [matAutocomplete]="velden"/>
          <mat-autocomplete #velden="matAutocomplete" autoActiveFirstOption [displayWith]="displayVeld">
            <mat-option *ngFor="let veld of (filteredVelden$ | async)" [value]="veld">{{ veld.label }}</mat-option>
          </mat-autocomplete>
          <mat-error *ngIf="veldControl.invalid">{{ errorVeld() }}</mat-error>
        </mat-form-field>

        <mat-form-field class="filter-operator-combo">
          <input type="text" placeholder="Operator" matInput [formControl]="operatorControl" [matAutocomplete]="operatoren"/>
          <mat-autocomplete #operatoren="matAutocomplete" autoActiveFirstOption [displayWith]="displayOperator">
            <mat-option *ngFor="let operator of (filteredOperatoren$ | async)" [value]="operator">{{ operator.label }}</mat-option>
          </mat-autocomplete>
          <mat-error *ngIf="operatorControl.invalid">{{errorOperator()}}</mat-error>
        </mat-form-field>

        <ng-container [ngSwitch]="veldwaardeType$ | async">
          <mat-form-field *ngSwitchCase="'FreeString'" class="filter-waarde-editbox">
            <input type="text" matInput placeholder="Waarde" [formControl]="textWaardeControl"/>
            <mat-error *ngIf="textWaardeControl.invalid">{{errorTextWaarde()}}</mat-error>
          </mat-form-field>
          <mat-form-field *ngSwitchCase="'FreeDouble'" class="filter-waarde-editbox">
            <input type="number" step="0.1" matInput placeholder="Getal" [formControl]="doubleWaardeControl"/>
            <mat-error *ngIf="doubleWaardeControl.invalid">{{errorDoubleWaarde()}}</mat-error>
          </mat-form-field>
          <mat-form-field *ngSwitchCase="'FreeInteger'" class="filter-waarde-editbox">
            <input type="number" step="1" matInput placeholder="Getal" [formControl]="integerWaardeControl"/>
            <mat-error *ngIf="integerWaardeControl.invalid">{{errorIntegerWaarde()}}</mat-error>
          </mat-form-field>
          <span *ngSwitchDefault class="filter-waarde-editbox"></span>
        </ng-container>

        <div class="delete-icon">
          <button mat-icon-button (click)="verwijderActieveEditor()" [disabled]="!(kanHuidigeEditorVerwijderen$ | async)" matTooltip="Verwijder actieve chip">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>

      <div class="query-builder">
        <awv-filter-query-builder [expressionEditor]="filterEditor$ | async"
                                  (expressionEditorUpdate)="onExpressionEditorUpdate($event)"></awv-filter-query-builder>
      </div>

    </div>

    <div class="filter-footer">
      <button mat-button class="filter-sluit-button" (click)="close()">
        Annuleer
      </button>

      <button mat-button color="primary" class="filter-pas-toe-button" (click)="onAction('pasFilterToe')" [disabled]="ongeldigeFilter$ | async">
        Pas toe
      </button>
    </div>
  </div>
</div>
